<!-- CS2340 - Parthkumar Thakkar -->

<project name="Ant Lab" basedir="." default = "all">

	<path id="classpath">
    	<fileset dir="lib">
        	<include name="**/*.jar" />
        </fileset>
        <fileset dir="build">
            <include name="*.class" /> 
        </fileset> 
    </path>
    
    <!-- init: Set up all your properties. -->
	<target name="init">
		<property name="src.dir" location="src" />
		<property name="build.dir" location="build" />
		<property name="apidoc.dir" location="apidoc" />
		<property name="lib.dir" location="lib" />
		<property name="main-class" location="${src.dir}/edu/gatech/oad/antlab/pkg1/AntLabMain" />
		<property name="jar-file" value="AntLabRun.jar" />
	</target>
	
	<!-- prepare: Make all the required directories. -->
	<target name="prepare" depends="init">
		<mkdir dir="${build.dir}" />
		<mkdir dir="${apidoc.dir}" />
	</target>
	
	
	<!-- compile: This will compile all java classes in the 'src' directory tree to the 'build' directory. -->
	<target name="compile" depends="prepare" description="Compiles java classes">
		<javac srcdir="${src.dir}"  destdir="${build.dir}" classpathref="classpath" />
	</target>
    
	<!-- javadoc: This will generate the javadoc documentation for
                         all java classes in the 'src' directory and will be
                         stored in the 'apidoc' directory. -->
	<target name="javadoc" depends="compile" description="generate javadocs">
		<javadoc sourcepath = "${src.dir}" access = "public" destdir="${apidoc.dir}" packagenames="**">
			<fileset dir="${src.dir}/" includes="**/*.java" />
			<bottom>
				<![CDATA[<i>Copyright &#169; 2011 Team 15 CS2340. All Rights Reserved.</i>]]>
			</bottom>
 		</javadoc>
	</target>
  
	<!-- jar: This will package the compiled classes (excluding the 
                         resources.jar) as a JAR titled "AntLabRun.jar".
                         The JAR must use a mainfest and should
                         only include the compiled classes and the manifest.
                         Your manifest file may be manually created or generated
                         automatically by your ant task. -->
	<target name="jar" depends="compile">  
  		<jar destfile="${jar-file}" basedir="${build.dir}">
            <manifest>                 
                <attribute name="Class-Path" value="AntLabRun.jar" />
            	<attribute name="Main-Class" value="${main-class}" />
            </manifest> 
        </jar> 
	</target>

    <!-- run: This will start program execution and run the jar
                         file created in the 'jar' task above.  A simple
                         print out with your team name and some computation
                         results should occur if the program runs
                         correctly and you wrote your code correctly. -->
    <target name="run" depends="jar">
        <java jar="${lib.dir}/resources.jar" fork="true" />
    </target>
   
    <!-- all: This should perform all of the above tasks (but NOT clean). -->
    <target name="all" depends="init, prepare, compile, javadoc, jar, run" description="the default target" />
   
    <!-- clean:  This will remove any compiled classes and any
                         JARs you created as well as any 
                         javadoc files (i.e. anything that would be created 
                         when the "all" task is run). -->
    <target name="clean" depends="init"> 
        <delete dir="${build.dir}" />
        <delete dir="${apidoc.dir}" />
    </target>
    
</project>